# This workflow will build a Java project with Maven, and cache/restore any dependencies to improve the workflow execution time
# For more information see: https://docs.github.com/en/actions/automating-builds-and-tests/building-and-testing-java-with-maven

# This workflow uses actions that are not certified by GitHub.
# They are provided by a third-party and are governed by
# separate terms of service, privacy policy, and support
# documentation.

name: Java CI with Maven  
  
on:  
  push:  
    branches: [ "main" ]  
  pull_request:  
    branches: [ "main" ]  
  
permissions:  
  contents: read  
  packages: write  
  checks: write    
  security-events: write    
  pull-requests: write  
  repository-projects: write  
  
jobs:  
  test:  
    runs-on: ${{ matrix.os }}  
    strategy:  
      matrix:  
        java: ['17']  
        os: [ubuntu-latest, windows-latest, macos-latest]  
      
    steps:  
    - uses: actions/checkout@v4  
      
    - name: Set up JDK 17 (target version)  
      uses: actions/setup-java@v4  
      with:  
        java-version: '17'  
        distribution: 'temurin'  
        cache: maven  
      
    - name: Build with Maven  
      run: mvn -B compile --file pom.xml  
      
    - name: Run Tests  
      run: mvn -B test --file pom.xml  
      
    - name: Generate Coverage Report  
      run: mvn jacoco:report  
      
    - name: Upload Coverage to Codecov  
      uses: codecov/codecov-action@v3  
      with:  
        file: ./target/site/jacoco/jacoco.xml  
  
  
  
  
  
